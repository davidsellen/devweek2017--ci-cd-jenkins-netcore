var app=angular.module("app",[]).config(function($sceDelegateProvider){$sceDelegateProvider.resourceUrlWhitelist(["self","http://*:*/**"])});app.controller("HomeController",["$scope","$http","$interval","$timeout","$sce",($scope,$http,$interval,$timeout)=>{let privList=[];$scope.searchType="many";$scope.url="";$scope.list=[];$scope.notificationQueue=[];$scope.enqueue=()=>{let urls=$scope.url.split(/\r\n|\r|\n/);Enumerable.From(urls).ForEach(url=>{$http({method:"POST",url:"/api/Enqueue",data:{OriginalMediaUrl:url}}).then(function(){$scope.notificationQueue.push("O vídeo '"+url+"' foi enviado para validação e processamento...");$timeout(()=>{$scope.notificationQueue.shift()},3e3);$scope.url=""},function(){alert("Algo não deu muito certo!")})})};$interval(()=>{$http({method:"GET",url:"/api/downloads",data:{}}).then(function(response){Enumerable.From(privList).ForEach(it=>{delete it.$$hashKey});JSON.stringify(response.data)!=JSON.stringify(privList)&&(privList=response.data,$scope.list=response.data)},function(){})},1500)}]);app.controller("NavController",["$scope","$q",$scope=>{$scope.title="DevWeek 2017"}]);